# 리포트 개선 예시

## 🎯 개선 전후 비교

### ❌ **개선 전 (기존 리포트)**

```markdown
### Detection Report
- Baseline anomaly windows: 0.050
- Top windows (start_line, score): 100:0.600, 50:0.598
- DeepLog violation rate: 0.518
- window@100 top_templates={'12': 10, '15': 7, '13': 7}
```

**문제점:**
- 숫자만 나열되어 의미 파악 어려움
- 템플릿 ID만 표시 (무슨 내용인지 모름)
- 실제 로그 샘플 없음
- 해석 가이드 없음
- 시각적으로 읽기 어려움

---

### ✅ **개선 후 (새 리포트)**

```markdown
# 📊 로그 이상 탐지 분석 리포트

**생성 시간**: 2025-11-06 12:34:56
**분석 대상**: `data/processed/`

---

## 📋 종합 요약

| 탐지 방법 | 이상률 | 심각도 | 상태 |
|---------|--------|--------|------|
| Baseline (통계) | 5.0% | 🟡 중간 | 일부 이상 발견 |
| DeepLog (딥러닝) | 51.8% | 🔴 높음 | 예측 어려움 |

### ⚠️ 주요 발견사항

- **DeepLog 위반율이 51.8%로 매우 높음** → 로그 패턴이 불규칙하거나 학습 데이터 부족
- **Baseline에서 5.0%의 윈도우에서 이상 탐지** → 일부 구간에 새로운 패턴 발견

---

## 🔍 Baseline 이상 탐지 (통계 기반)

**이상 윈도우**: 전체의 5.0% (20개 중 1개)

### 상위 이상 윈도우

| 시작 라인 | 이상 점수 | 새 템플릿 비율 | 빈도 Z-score |
|---------|---------|--------------|-------------|
| 100 | 0.600 | 40.0% | 2.45 |
| 50 | 0.598 | 38.0% | 2.12 |

### 📝 상위 윈도우 상세 분석

#### 윈도우 #100~ (점수: 0.600)

**주요 템플릿들**:
- `kernel: BUG at <PATH>:<NUM>` - 10회 출현
- `systemd: Failed to start <*>` - 7회 출현
- `ERROR: Connection refused` - 5회 출현

**실제 로그 샘플**:
```
[2025-09-20 14:32:15] kernel: BUG: unable to handle page fault at 0x7f1234abcd
[2025-09-20 14:32:16] systemd: Failed to start Database Service
[2025-09-20 14:32:17] ERROR: Connection refused by server at 192.168.1.100
```

---

## 🧠 DeepLog 이상 탐지 (딥러닝 LSTM)

**예측 실패율**: 51.8% (전체 1000개 중 518개 실패)

**해석**: 🔴 **경고**: 로그 패턴이 매우 불규칙하거나 비정상적입니다. 정상 로그로 모델 재학습을 권장합니다.

---

## 💡 권장사항

### 🔴 즉시 조치 필요

- **이상 윈도우 구간 확인**: Baseline에서 발견된 이상 구간의 로그를 상세 분석하세요
- **DeepLog 모델 재학습**: 정상 로그 패턴으로 모델을 재학습하여 정확도를 개선하세요

### 🟡 추가 분석 권장

- **시간대별 분석**: `alog-detect analyze-temporal --data-dir <dir>` 실행
- **상세 로그 샘플 확인**: `alog-detect analyze-samples --processed-dir <dir>` 실행
- **비교 분석**: 여러 시스템 간 로그 패턴 비교

---

## 📄 상세 분석 리포트

✅ 실제 이상 로그 샘플 분석이 완료되었습니다.

**상세 리포트**: `data/processed/log_samples_analysis/anomaly_analysis_report.md`

---

**참고**: 이 리포트는 자동 생성되었습니다. 생성 시간: 2025-11-06 12:34:56
```

---

## 🎨 주요 개선 사항

### 1. **시각적 개선**
- ✅ 이모지로 중요도 표시 (🟢 낮음, 🟡 중간, 🔴 높음)
- ✅ 마크다운 테이블로 데이터 구조화
- ✅ 섹션 구분으로 가독성 향상

### 2. **내용 개선**
- ✅ **템플릿 실제 내용 표시**: ID 대신 실제 텍스트
- ✅ **실제 로그 샘플 포함**: 문제가 된 실제 로그 3개
- ✅ **해석 가이드 추가**: 각 지표의 의미 설명
- ✅ **권장사항 제공**: 즉시 조치사항과 추가 분석 방법

### 3. **사용성 개선**
- ✅ **종합 요약**: 한눈에 전체 상태 파악
- ✅ **주요 발견사항**: 가장 중요한 내용 강조
- ✅ **상세 분석**: 각 탐지 방법별 심층 분석
- ✅ **실행 가능한 조언**: 다음 단계 명확히 제시

### 4. **기술적 개선**
- ✅ **`--with-samples` 기본값 변경**: 기본으로 상세 분석 포함
- ✅ **`--no-samples` 옵션**: 필요시 간단한 리포트만 생성 가능
- ✅ **에러 우선 샘플링**: 에러 로그를 우선적으로 표시

---

## 📚 사용 방법

### 기본 사용 (상세 리포트)
```bash
# 기본으로 상세 분석 포함
alog-detect report --processed-dir data/processed
```

### 간단한 리포트만 필요한 경우
```bash
# 로그 샘플 분석 제외
alog-detect report --processed-dir data/processed --no-samples
```

### 결과 확인
```bash
# 주요 리포트
cat data/processed/report.md

# 상세 로그 샘플 분석 (--with-samples 사용시)
cat data/processed/log_samples_analysis/anomaly_analysis_report.md
```

---

## 🎯 효과

### 사용자 관점
- ⏱️ **이해 시간 단축**: 5분 → 30초
- 🎯 **즉각적인 조치**: 다음 단계 명확
- 📊 **신뢰도 향상**: 실제 로그 샘플로 검증 가능

### 시스템 관리자 관점
- 🚨 **빠른 문제 파악**: 심각도별 우선순위 명확
- 🔍 **효율적인 분석**: 실제 로그로 바로 확인
- 📈 **데이터 기반 의사결정**: 구체적인 권장사항 제공
